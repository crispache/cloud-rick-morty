var j=Object.defineProperty;var O=(r,t,a)=>t in r?j(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a;var S=(r,t,a)=>(O(r,typeof t!="symbol"?t+"":t,a),a);import{c as $,j as i,T as B,a as e,C as I,g as G,u as b,F as f,A as q,b as z,d as R,B as m,e as U,R as d,o as V,r as v,f as h,h as w,i as _,k as H,l as W,m as K,n as L,p as J,S as Q,q as X,s as P,t as Y,P as Z,v as ee,w as te,x as re,H as ae,y as ne,z as E,N as se,D as oe}from"./vendor-4a734472.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function a(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=a(s);fetch(s.href,o)}})();const ie=$({palette:{primary:{main:"#121238",light:"#03AEC7",dark:"#166678",contrastText:"#ffff"},secondary:{main:"#53ffa4",light:"#F2DD72"}}}),ce=({children:r})=>i(B,{theme:ie,children:[e(I,{}),r]}),C={root:"/",list:"/list",detail:"/detail/:id"},k={...C,detail:r=>G(C.detail,{id:r})},D=""+new URL("rick-morty-logo-871ade10.png",import.meta.url).href,M=({children:r})=>{const{palette:t}=b();return i(f,{children:[e(q,{position:"static",color:"primary",children:e(z,{children:e("img",{src:D,alt:"Logo de Rick & Morty",height:35,width:"auto",style:{marginRight:8,objectFit:"contain"}})})}),e("main",{style:{backgroundColor:t.primary.main},children:e(R,{children:e(m,{sx:{minHeight:"100vh"},children:r})})})]})};class T{makeGetRequest(t,a){return U.get(t,{params:{...a}}).then(n=>({data:n.data}))}}let le=class{constructor(t){S(this,"client");this.client=t}async getCharacters(t){const a="https://rickandmortyapi.com/api/character/",{data:n}=await this.client.makeGetRequest(a,t);return{...n}}};const de=new T,he=new le(de),ue=async(r,t)=>{try{const{info:a,results:n}=await he.getCharacters({page:r,name:t||""});return{data:n,pages:a.count}}catch(a){return a instanceof Error&&"message"in a?{data:[],pages:0,error:a.message}:{data:[],pages:0,error:"Se ha producido un error al cargar los datos."}}},ge=r=>r.map(pe),pe=r=>({id:r.id,name:r.name,image:r.image,gender:r.gender,species:r.species}),me={data:[],currentPage:1,totalPages:1,isLoading:!1,errorMessage:""},fe="Se ha producido un error al cargar el listado",ye=()=>{const[r,t]=d.useState(""),[a,n]=d.useState(me),[s]=V(r,500),o=v.useCallback((u=fe)=>{n({...a,data:[],isLoading:!1,errorMessage:u,totalPages:0})},[]),c=v.useCallback((u,p,g)=>{n({...a,data:ge(u),isLoading:!1,totalPages:p===void 0?a.totalPages:p,currentPage:g})},[]),l=v.useCallback(async u=>{try{n({...a,isLoading:!0,errorMessage:""});const{data:p,error:g,pages:x}=await ue(u,r);g&&o(g),g||c(p,x,u)}catch{o()}},[o,c,r]),y=v.useCallback(u=>{l(u)},[]);return d.useEffect(()=>{l(1)},[s]),{filter:r,...a,listCharacters:a.data,setFilter:t,getCharacters:l,onChangePage:y}},Ce=d.memo(()=>e(f,{children:i("div",{className:"characters-list-header",children:[e("img",{src:D,alt:"Logo de Rick & Morty",height:80,width:"auto",style:{objectFit:"contain"}}),e(h,{variant:"h4",children:"Listado de personajes"}),e(h,{variant:"subtitle1",children:"Busca los personajes que aparecen en la serie Rick & Morty."})]})})),xe=r=>{const{character:t}=r,a=w(),{palette:n}=b(),s=()=>{a(k.detail(t.id))};return e(f,{children:e(_,{variant:"outlined",sx:{width:250,height:245,backgroundColor:n.primary.dark,borderRadius:2,"&:hover":{backgroundColor:n.primary.light}},children:i(H,{sx:{padding:"15px"},onClick:s,children:[e(W,{component:"img",sx:{height:135,width:"200",objectFit:"contain"},image:t.image,alt:"Foto del personaje"}),i(K,{sx:{padding:"10px 0px 5px 0px"},children:[e(m,{children:e(h,{variant:"h6",color:n.primary.contrastText,style:{textShadow:`0px 0px 20px ${n.secondary.light}`},noWrap:!0,children:t.name})}),i(m,{display:"flex",gap:1,marginTop:1,children:[e(h,{noWrap:!0,children:e(L,{label:t.gender,size:"small",component:"span",variant:"filled",color:"secondary"})}),e(h,{noWrap:!0,children:e(L,{label:t.species,size:"small",variant:"filled",component:"span",color:"secondary",sx:{color:n.primary.main}})})]})]})]})})})},ve=""+new URL("empty-c4f1001f.png",import.meta.url).href,Le=()=>{const{palette:r}=b();return e(R,{children:e(m,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",textAlign:"center"},children:i(m,{children:[e("img",{src:ve,alt:"Sin datos",height:210,width:280}),e(h,{variant:"body2",display:"block",color:r.primary.contrastText,children:"No se han encontrado resultados."}),e(h,{variant:"body2",display:"block",color:r.primary.contrastText,children:"Pruebe con otro nombre."})]})})})},A=r=>{const{color:t}=r;return e(m,{sx:{display:"flex"},children:e(J,{color:t||"inherit"})})},be="Se ha producido un error. Por favor, inténtelo de nuevo más tarde. Gracias.",N=r=>{const{isOpen:t,handleClose:a,errorMessage:n}=r;return e(Q,{open:t,autoHideDuration:6e3,onClose:a,children:e(X,{onClose:a,severity:"error",sx:{width:"100%"},children:n||be})})},Se=()=>e(P,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",textAlign:"center"},children:e(A,{color:"secondary"})}),Ee=r=>{const{filter:t,setFilter:a}=r;return e("form",{onSubmit:s=>s.preventDefault(),children:e(m,{display:"flex",gap:2,flexWrap:"wrap",sx:{margin:"30px 0px"},children:e(Y,{label:"Buscar personaje",value:t,placeholder:"Ej: Morty Smith",variant:"filled",color:"primary",onChange:s=>{a(s.target.value)},sx:{width:"400px",background:"white"}})})})},Re=r=>{const{onChangePage:t,totalPages:a,currentPage:n}=r,[s,o]=d.useState(n);return e("div",{className:"pagination-container",children:e(Z,{page:s,count:a,color:"secondary",onChange:(l,y)=>{o(y),t(y)}})})},we=d.memo(r=>{const{characters:t,isLoading:a,totalPages:n,onChangePage:s,errorMessage:o,currentPage:c,filter:l,setFilter:y}=r,[u,p]=d.useState(!1),g=d.useMemo(()=>t.length===0,[t]);return d.useEffect(()=>{o&&p(!0)},[o]),i("div",{className:"characters-list-container",children:[e(Ce,{}),e(Ee,{filter:l,setFilter:y}),a&&e(Se,{}),!a&&i(f,{children:[i("div",{className:"characters-list",children:[g&&e(Le,{}),!g&&t.map(x=>e(xe,{character:x},x.id))]}),!g&&e(Re,{currentPage:c,totalPages:n,onChangePage:s})]}),e(N,{isOpen:u,errorMessage:o,handleClose:()=>p(!1)})]})}),Pe=()=>{const{listCharacters:r,isLoading:t,totalPages:a,errorMessage:n,currentPage:s,onChangePage:o,filter:c,setFilter:l}=ye();return e(f,{children:e(we,{characters:r,isLoading:t,totalPages:a,errorMessage:n,onChangePage:o,currentPage:s,filter:c,setFilter:l})})},ke=r=>{const{url:t}=r;return e("img",{src:t,alt:"Foto del personaje",height:160,width:160,style:{borderRadius:3}})},De=()=>e(P,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",textAlign:"center"},children:e(A,{color:"secondary"})}),Me=r=>{const{data:t}=r,{palette:a}=b();return i("div",{className:"info",children:[e("div",{className:"character-name",children:e(h,{variant:"h4",color:a.primary.light,children:t.name})}),i("div",{className:"extra-info",children:[i(h,{variant:"body2",color:"secondary",marginTop:2,children:["Género:  ",e(L,{component:"span",label:t.gender,size:"small",color:"secondary"})]}),i(h,{variant:"body2",color:"secondary",marginTop:2,children:["Especie:  ",e(L,{component:"span",label:t.species,size:"small",color:"secondary"})]}),i(h,{variant:"body2",color:a.secondary.light,marginTop:2,children:["Localización: ",t.location]})]})]})},Te=r=>{const{character:t,isLoading:a,errorMessage:n}=r,[s,o]=d.useState(!1),c=w(),l=()=>{c(k.list)};return d.useEffect(()=>{n&&o(!0)},[n]),i("div",{className:"character-details-container",children:[e(ee,{variant:"outlined",color:"secondary",startIcon:e(te,{}),sx:{marginBottom:5},onClick:l,children:"Volver al listado"}),a&&e(De,{}),!a&&e(f,{children:i("div",{className:"character-details",children:[e(ke,{url:t.image}),e(Me,{data:t})]})}),e(N,{isOpen:s,errorMessage:n,handleClose:()=>o(!1)})]})};class Ae{constructor(t){S(this,"client");this.client=t}async getCharacterDetails(t){const a=`https://rickandmortyapi.com/api/character/${t}`,{data:n}=await this.client.makeGetRequest(a);return n}}const Ne=new T,Fe=new Ae(Ne),je=async r=>{try{return{data:await Fe.getCharacterDetails(r)}}catch(t){return t instanceof Error&&"message"in t?{data:null,error:t.message}:{data:null,error:"Se ha producido un error al cargar los datos."}}},Oe=r=>({name:r.name,image:r.image,gender:r.gender,species:r.species,location:r.location.name}),F={name:"",image:"",gender:"unknown",species:"",location:""},$e=()=>({data:F,isLoading:!1,errorMessage:""}),Be="Se ha producido un error al cargar los datos",Ie=()=>{const[r,t]=d.useState($e()),a=(o=Be)=>{t({...r,data:F,isLoading:!1,errorMessage:o})},n=o=>{t({...r,data:Oe(o),isLoading:!1})};return{...r,getCharacterDetails:async o=>{try{t({...r,isLoading:!0,errorMessage:""});const{data:c,error:l}=await je(o);l&&a(l),l||n(c)}catch{a()}}}},Ge=()=>{const{getCharacterDetails:r,data:t,isLoading:a,errorMessage:n}=Ie(),{id:s}=re();return d.useEffect(()=>{r(+s)},[]),e(f,{children:e(Te,{character:t,isLoading:a,errorMessage:n})})},qe=()=>e(M,{children:e(Pe,{})}),ze=()=>e(M,{children:e(Ge,{})}),Ue=()=>e(ae,{children:e(ce,{children:i(ne,{children:[e(E,{path:C.root,element:e(se,{to:C.list})}),e(E,{path:C.list,element:e(qe,{})}),e(E,{path:C.detail,element:e(ze,{})})]})})});const Ve=()=>e(Ue,{}),_e=document.getElementById("root"),He=oe(_e);He.render(e(Ve,{}));
